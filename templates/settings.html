{% extends "base.html" %}
{% block title %}Settings{% endblock %}
{% block content %}
<div class="card app-card shadow-sm" style="max-width: 720px; margin: 0 auto;">
    <div class="card-body">
        <h2 class="mb-2">Application Settings</h2>
        <p class="muted mb-4">Update runtime configuration. Changes persist to <code>config.ini</code> and apply immediately.</p>
        <form method="post" class="row g-3">
            <div class="col-12">
                <label for="secret_key" class="form-label">Secret key</label>
                <input id="secret_key" name="secret_key" class="form-control" required value="{{ current.secret_key }}" autocomplete="off">
            </div>

            <div class="col-md-6">
                <div class="form-check form-switch mt-2">
                    <input class="form-check-input" type="checkbox" role="switch" id="session_cookie_http_only" name="session_cookie_http_only" {% if current.session_cookie_http_only %}checked{% endif %}>
                    <label class="form-check-label" for="session_cookie_http_only">Session cookie HTTP only</label>
                </div>
            </div>

            <div class="col-md-6">
                <label for="session_cookie_samesite" class="form-label">Session cookie SameSite</label>
                <select id="session_cookie_samesite" name="session_cookie_samesite" class="form-select">
                    {% for option in ["Lax", "Strict", "None"] %}
                        <option value="{{ option }}" {% if option == current.session_cookie_samesite %}selected{% endif %}>{{ option }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="col-12">
                <label for="exe_types" class="form-label">Executable types (comma separated)</label>
                <input id="exe_types" name="exe_types" class="form-control" value="{{ current.exe_types }}" placeholder="standard, elevated, portable">
            </div>

            <div class="col-12 d-flex flex-column flex-md-row gap-3 mt-2">
                <button type="submit" class="btn btn-primary flex-fill">Save settings</button>
                <a class="btn btn-outline-secondary flex-fill" href="{{ url_for('dashboard.dashboard') }}">Back to dashboard</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
